<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Demo AUC Guidance App</title>
</head>

<body onload="populate(document.forms[0])">
  <div>
    <form action="evaluate" method="POST">
      <table>
        <caption>Enter Patient Demographics</caption>
        <tr>
          <th><label for="gender">Gender</label></th>
          <td>
            <select name="gender" required>
              <option id="male" value="male">Male</option>
              <option id="female" value="female">Female</option>
              <option id="other" value="other">Other</option>
            </select>
          </td>
        </tr>
        <tr>
          <th><label for="age">Age</label></th>
          <td><input name="age" required></td>
        </tr>
        <tr>
          <th><label for="indication">Indication</label></th>
          <td>
            <input list="indications" name="indication" required>
            <datalist id="indications">
              <option value="13213009">congenital heart disease</option>
              <option value="25064002">headache</option>
              <option value="279039007">lower back pain</option>
              <option value="423341008">optic disc edema</option>
              <option value="27355003">toothache</option>
            </datalist>
          </td>
        </tr>
        <tr>
          <th><label for="procedure">Procedure</label></th>
          <td>
            <input list="procedures" name="procedure" required>
            <datalist id="procedures">
              <option value="75561">cardiac mri</option>
              <option value="70450">ct scan - no contrast material</option>
              <option value="71275">cta - with contrast material</option>
              <option value="72133">lumbar spine ct scan</option>
              <option value="70544">mra - head</option>
            </datalist>
          </td>
        </tr>
      </table>
      <input type="submit">
    </form>
  </div>
</body>

<script>

function getUrlVars() {
  const vars = {};
  const parts = window.location.href
    .replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
      vars[key] = value;
    });
  return vars;
}

function populate(form) {
  const params = getUrlVars();
  const gender = form.elements.gender.options[params.gender];
  if (params.age) form.elements.age.value = params.age;
  if (gender) gender.selected = true;
}

</script>

</html>
